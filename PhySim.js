parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"rqiD":[function(require,module,exports) {
"use strict";exports.__esModule=!0,exports.gl=null;
},{}],"CeE2":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var t=require("../ogl_globals"),e=function(){function e(){if(this.lastFrameTime=0,this.lastFPSTime=0,e.instance)throw new Error("Error: Instatiation failed: use DisplayManager.getInstance")}return e.prototype.createCanvas=function(e){var i=document.getElementById("body");this.canvas=document.createElement("canvas"),this.canvas.width=e[0],this.canvas.height=e[1],i.appendChild(this.canvas),this.gl=this.canvas.getContext("webgl2"),t.gl=this.gl,this.viewport_size=e,this.gl.viewport(0,0,e[0],e[1])},e.prototype.setCanvasSize=function(t){this.canvas.width=t[0],this.canvas.height=t[1]},e.prototype.setViewportSize=function(e){this.viewport_size=e,t.gl.viewport(0,0,e[0],e[1])},e.prototype.getViewportSize=function(){return this.viewport_size},e.prototype.getCanvasSize=function(){return[this.canvas.width,this.canvas.height]},e.prototype.getGlContext=function(){return this.gl},e.getInstance=function(){return e.instance},e.instance=new e,e}();exports.default=e;
},{"../ogl_globals":"rqiD"}],"XJqx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=a,exports.toRadian=s,exports.equals=p,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var r=1e-6;exports.EPSILON=r;var t="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=t;var e=Math.random;function a(r){exports.ARRAY_TYPE=t=r}exports.RANDOM=e;var o=Math.PI/180;function s(r){return r*o}function p(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))}
},{}],"eN7R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.copy=o,exports.identity=a,exports.fromValues=u,exports.set=s,exports.transpose=i,exports.invert=p,exports.adjoint=c,exports.determinant=f,exports.multiply=x,exports.rotate=l,exports.scale=M,exports.fromRotation=h,exports.fromScaling=b,exports.str=v,exports.frob=m,exports.LDU=d,exports.add=P,exports.subtract=y,exports.exactEquals=O,exports.equals=A,exports.multiplyScalar=w,exports.multiplyScalarAndAdd=E,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function n(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function u(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function i(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t}function p(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*a-o*n;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-o*u,t[3]=e*u,t):null}function c(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t}function f(t){return t[0]*t[3]-t[2]*t[1]}function x(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],p=e[2],c=e[3];return t[0]=n*s+a*i,t[1]=o*s+u*i,t[2]=n*p+a*c,t[3]=o*p+u*c,t}function l(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=Math.sin(e),i=Math.cos(e);return t[0]=n*i+a*s,t[1]=o*i+u*s,t[2]=n*-s+a*i,t[3]=o*-s+u*i,t}function M(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1];return t[0]=n*s,t[1]=o*s,t[2]=a*i,t[3]=u*i,t}function h(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t}function b(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t}function v(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function m(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function d(t,r,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,r,e]}function P(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function y(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function O(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function A(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],p=e[2],c=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-p)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(u-c)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(c))}function w(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function E(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}var R=x;exports.mul=R;var j=y;exports.sub=j;
},{"./common.js":"XJqx"}],"M21d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=a,exports.copy=n,exports.identity=o,exports.fromValues=s,exports.set=u,exports.invert=i,exports.determinant=p,exports.multiply=c,exports.rotate=f,exports.scale=M,exports.translate=h,exports.fromRotation=x,exports.fromScaling=l,exports.fromTranslation=b,exports.str=m,exports.frob=v,exports.add=P,exports.subtract=d,exports.multiplyScalar=O,exports.multiplyScalarAndAdd=y,exports.exactEquals=w,exports.equals=A,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};a.get||a.set?Object.defineProperty(r,e,a):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(6);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function a(r){var e=new t.ARRAY_TYPE(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function n(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(r,e,a,n,o,s){var u=new t.ARRAY_TYPE(6);return u[0]=r,u[1]=e,u[2]=a,u[3]=n,u[4]=o,u[5]=s,u}function u(t,r,e,a,n,o,s){return t[0]=r,t[1]=e,t[2]=a,t[3]=n,t[4]=o,t[5]=s,t}function i(t,r){var e=r[0],a=r[1],n=r[2],o=r[3],s=r[4],u=r[5],i=e*o-a*n;return i?(i=1/i,t[0]=o*i,t[1]=-a*i,t[2]=-n*i,t[3]=e*i,t[4]=(n*u-o*s)*i,t[5]=(a*s-e*u)*i,t):null}function p(t){return t[0]*t[3]-t[1]*t[2]}function c(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1],f=e[2],M=e[3],h=e[4],x=e[5];return t[0]=a*p+o*c,t[1]=n*p+s*c,t[2]=a*f+o*M,t[3]=n*f+s*M,t[4]=a*h+o*x+u,t[5]=n*h+s*x+i,t}function f(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=Math.sin(e),c=Math.cos(e);return t[0]=a*c+o*p,t[1]=n*c+s*p,t[2]=a*-p+o*c,t[3]=n*-p+s*c,t[4]=u,t[5]=i,t}function M(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1];return t[0]=a*p,t[1]=n*p,t[2]=o*c,t[3]=s*c,t[4]=u,t[5]=i,t}function h(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1];return t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=a*p+o*c+u,t[5]=n*p+s*c+i,t}function x(t,r){var e=Math.sin(r),a=Math.cos(r);return t[0]=a,t[1]=e,t[2]=-e,t[3]=a,t[4]=0,t[5]=0,t}function l(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function b(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function m(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function v(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function P(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t}function d(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t}function O(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t}function y(t,r,e,a){return t[0]=r[0]+e[0]*a,t[1]=r[1]+e[1]*a,t[2]=r[2]+e[2]*a,t[3]=r[3]+e[3]*a,t[4]=r[4]+e[4]*a,t[5]=r[5]+e[5]*a,t}function w(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]}function A(r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1],f=e[2],M=e[3],h=e[4],x=e[5];return Math.abs(a-p)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(n-c)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-f)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-M)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-h)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(i-x)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))}var E=c;exports.mul=E;var R=d;exports.sub=R;
},{"./common.js":"XJqx"}],"vtQf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.fromMat4=n,exports.clone=e,exports.copy=o,exports.fromValues=s,exports.set=u,exports.identity=p,exports.transpose=i,exports.invert=M,exports.adjoint=c,exports.determinant=h,exports.multiply=f,exports.translate=x,exports.rotate=b,exports.scale=l,exports.fromTranslation=m,exports.fromRotation=v,exports.fromScaling=P,exports.fromMat2d=O,exports.fromQuat=d,exports.normalFromMat4=w,exports.projection=E,exports.str=y,exports.frob=S,exports.add=A,exports.subtract=j,exports.multiplyScalar=I,exports.multiplyScalarAndAdd=L,exports.exactEquals=N,exports.equals=R,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,a):{};n.get||n.set?Object.defineProperty(r,a,n):r[a]=t[a]}return r.default=t,r}function a(){var r=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function n(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function e(r){var a=new t.ARRAY_TYPE(9);return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function s(r,a,n,e,o,s,u,p,i){var M=new t.ARRAY_TYPE(9);return M[0]=r,M[1]=a,M[2]=n,M[3]=e,M[4]=o,M[5]=s,M[6]=u,M[7]=p,M[8]=i,M}function u(t,r,a,n,e,o,s,u,p,i){return t[0]=r,t[1]=a,t[2]=n,t[3]=e,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t[8]=i,t}function p(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function i(t,r){if(t===r){var a=r[1],n=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=a,t[5]=r[7],t[6]=n,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function M(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8],c=M*s-u*i,h=-M*o+u*p,f=i*o-s*p,x=a*c+n*h+e*f;return x?(x=1/x,t[0]=c*x,t[1]=(-M*n+e*i)*x,t[2]=(u*n-e*s)*x,t[3]=h*x,t[4]=(M*a-e*p)*x,t[5]=(-u*a+e*o)*x,t[6]=f*x,t[7]=(-i*a+n*p)*x,t[8]=(s*a-n*o)*x,t):null}function c(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8];return t[0]=s*M-u*i,t[1]=e*i-n*M,t[2]=n*u-e*s,t[3]=u*p-o*M,t[4]=a*M-e*p,t[5]=e*o-a*u,t[6]=o*i-s*p,t[7]=n*p-a*i,t[8]=a*s-n*o,t}function h(t){var r=t[0],a=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],p=t[7],i=t[8];return r*(i*o-s*p)+a*(-i*e+s*u)+n*(p*e-o*u)}function f(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1],x=a[2],b=a[3],l=a[4],m=a[5],v=a[6],P=a[7],O=a[8];return t[0]=h*n+f*s+x*i,t[1]=h*e+f*u+x*M,t[2]=h*o+f*p+x*c,t[3]=b*n+l*s+m*i,t[4]=b*e+l*u+m*M,t[5]=b*o+l*p+m*c,t[6]=v*n+P*s+O*i,t[7]=v*e+P*u+O*M,t[8]=v*o+P*p+O*c,t}function x(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=s,t[4]=u,t[5]=p,t[6]=h*n+f*s+i,t[7]=h*e+f*u+M,t[8]=h*o+f*p+c,t}function b(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=Math.sin(a),f=Math.cos(a);return t[0]=f*n+h*s,t[1]=f*e+h*u,t[2]=f*o+h*p,t[3]=f*s-h*n,t[4]=f*u-h*e,t[5]=f*p-h*o,t[6]=i,t[7]=M,t[8]=c,t}function l(t,r,a){var n=a[0],e=a[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function m(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function v(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=a,t[2]=0,t[3]=-a,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function P(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function d(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=a+a,u=n+n,p=e+e,i=a*s,M=n*s,c=n*u,h=e*s,f=e*u,x=e*p,b=o*s,l=o*u,m=o*p;return t[0]=1-c-x,t[3]=M-m,t[6]=h+l,t[1]=M+m,t[4]=1-i-x,t[7]=f-b,t[2]=h-l,t[5]=f+b,t[8]=1-i-c,t}function w(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8],c=r[9],h=r[10],f=r[11],x=r[12],b=r[13],l=r[14],m=r[15],v=a*u-n*s,P=a*p-e*s,O=a*i-o*s,d=n*p-e*u,w=n*i-o*u,E=e*i-o*p,y=M*b-c*x,S=M*l-h*x,A=M*m-f*x,j=c*l-h*b,I=c*m-f*b,L=h*m-f*l,N=v*L-P*I+O*j+d*A-w*S+E*y;return N?(N=1/N,t[0]=(u*L-p*I+i*j)*N,t[1]=(p*A-s*L-i*S)*N,t[2]=(s*I-u*A+i*y)*N,t[3]=(e*I-n*L-o*j)*N,t[4]=(a*L-e*A+o*S)*N,t[5]=(n*A-a*I-o*y)*N,t[6]=(b*E-l*w+m*d)*N,t[7]=(l*O-x*E-m*P)*N,t[8]=(x*w-b*O+m*v)*N,t):null}function E(t,r,a){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/a,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function y(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function S(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function A(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t[4]=r[4]+a[4],t[5]=r[5]+a[5],t[6]=r[6]+a[6],t[7]=r[7]+a[7],t[8]=r[8]+a[8],t}function j(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t[3]=r[3]-a[3],t[4]=r[4]-a[4],t[5]=r[5]-a[5],t[6]=r[6]-a[6],t[7]=r[7]-a[7],t[8]=r[8]-a[8],t}function I(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*a,t}function L(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t[3]=r[3]+a[3]*n,t[4]=r[4]+a[4]*n,t[5]=r[5]+a[5]*n,t[6]=r[6]+a[6]*n,t[7]=r[7]+a[7]*n,t[8]=r[8]+a[8]*n,t}function N(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function R(r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1],x=a[2],b=a[3],l=a[4],m=a[5],v=a[6],P=a[7],O=a[8];return Math.abs(n-h)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(e-f)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(o-x)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-b)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-l)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(p-m)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(m))&&Math.abs(i-v)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(M-P)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(c-O)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))}var Y=f;exports.mul=Y;var _=j;exports.sub=_;
},{"./common.js":"XJqx"}],"w3aR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=r,exports.clone=n,exports.copy=o,exports.fromValues=e,exports.set=s,exports.identity=h,exports.transpose=M,exports.invert=u,exports.adjoint=i,exports.determinant=p,exports.multiply=c,exports.translate=f,exports.scale=x,exports.rotate=b,exports.rotateX=l,exports.rotateY=v,exports.rotateZ=m,exports.fromTranslation=P,exports.fromScaling=O,exports.fromRotation=E,exports.fromXRotation=S,exports.fromYRotation=w,exports.fromZRotation=I,exports.fromRotationTranslation=L,exports.fromQuat2=N,exports.getTranslation=q,exports.getScaling=R,exports.getRotation=d,exports.fromRotationTranslationScale=g,exports.fromRotationTranslationScaleOrigin=A,exports.fromQuat=y,exports.frustum=Y,exports.perspective=T,exports.perspectiveFromFieldOfView=_,exports.ortho=j,exports.lookAt=D,exports.targetTo=F,exports.str=Q,exports.frob=V,exports.add=X,exports.subtract=Z,exports.multiplyScalar=k,exports.multiplyScalarAndAdd=z,exports.exactEquals=B,exports.equals=C,exports.sub=exports.mul=void 0;var t=a(require("./common.js"));function a(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(a,r,n):a[r]=t[r]}return a.default=t,a}function r(){var a=new t.ARRAY_TYPE(16);return t.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function n(a){var r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function o(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function e(a,r,n,o,e,s,h,M,u,i,p,c,f,x,b,l){var v=new t.ARRAY_TYPE(16);return v[0]=a,v[1]=r,v[2]=n,v[3]=o,v[4]=e,v[5]=s,v[6]=h,v[7]=M,v[8]=u,v[9]=i,v[10]=p,v[11]=c,v[12]=f,v[13]=x,v[14]=b,v[15]=l,v}function s(t,a,r,n,o,e,s,h,M,u,i,p,c,f,x,b,l){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t[4]=e,t[5]=s,t[6]=h,t[7]=M,t[8]=u,t[9]=i,t[10]=p,t[11]=c,t[12]=f,t[13]=x,t[14]=b,t[15]=l,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){var r=a[1],n=a[2],o=a[3],e=a[6],s=a[7],h=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=e,t[11]=a[14],t[12]=o,t[13]=s,t[14]=h}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function u(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],s=a[4],h=a[5],M=a[6],u=a[7],i=a[8],p=a[9],c=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15],m=r*h-n*s,P=r*M-o*s,O=r*u-e*s,E=n*M-o*h,S=n*u-e*h,w=o*u-e*M,I=i*b-p*x,L=i*l-c*x,N=i*v-f*x,q=p*l-c*b,R=p*v-f*b,d=c*v-f*l,g=m*d-P*R+O*q+E*N-S*L+w*I;return g?(g=1/g,t[0]=(h*d-M*R+u*q)*g,t[1]=(o*R-n*d-e*q)*g,t[2]=(b*w-l*S+v*E)*g,t[3]=(c*S-p*w-f*E)*g,t[4]=(M*N-s*d-u*L)*g,t[5]=(r*d-o*N+e*L)*g,t[6]=(l*O-x*w-v*P)*g,t[7]=(i*w-c*O+f*P)*g,t[8]=(s*R-h*N+u*I)*g,t[9]=(n*N-r*R-e*I)*g,t[10]=(x*S-b*O+v*m)*g,t[11]=(p*O-i*S-f*m)*g,t[12]=(h*L-s*q-M*I)*g,t[13]=(r*q-n*L+o*I)*g,t[14]=(b*P-x*E-l*m)*g,t[15]=(i*E-p*P+c*m)*g,t):null}function i(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],s=a[4],h=a[5],M=a[6],u=a[7],i=a[8],p=a[9],c=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15];return t[0]=h*(c*v-f*l)-p*(M*v-u*l)+b*(M*f-u*c),t[1]=-(n*(c*v-f*l)-p*(o*v-e*l)+b*(o*f-e*c)),t[2]=n*(M*v-u*l)-h*(o*v-e*l)+b*(o*u-e*M),t[3]=-(n*(M*f-u*c)-h*(o*f-e*c)+p*(o*u-e*M)),t[4]=-(s*(c*v-f*l)-i*(M*v-u*l)+x*(M*f-u*c)),t[5]=r*(c*v-f*l)-i*(o*v-e*l)+x*(o*f-e*c),t[6]=-(r*(M*v-u*l)-s*(o*v-e*l)+x*(o*u-e*M)),t[7]=r*(M*f-u*c)-s*(o*f-e*c)+i*(o*u-e*M),t[8]=s*(p*v-f*b)-i*(h*v-u*b)+x*(h*f-u*p),t[9]=-(r*(p*v-f*b)-i*(n*v-e*b)+x*(n*f-e*p)),t[10]=r*(h*v-u*b)-s*(n*v-e*b)+x*(n*u-e*h),t[11]=-(r*(h*f-u*p)-s*(n*f-e*p)+i*(n*u-e*h)),t[12]=-(s*(p*l-c*b)-i*(h*l-M*b)+x*(h*c-M*p)),t[13]=r*(p*l-c*b)-i*(n*l-o*b)+x*(n*c-o*p),t[14]=-(r*(h*l-M*b)-s*(n*l-o*b)+x*(n*M-o*h)),t[15]=r*(h*c-M*p)-s*(n*c-o*p)+i*(n*M-o*h),t}function p(t){var a=t[0],r=t[1],n=t[2],o=t[3],e=t[4],s=t[5],h=t[6],M=t[7],u=t[8],i=t[9],p=t[10],c=t[11],f=t[12],x=t[13],b=t[14],l=t[15];return(a*s-r*e)*(p*l-c*b)-(a*h-n*e)*(i*l-c*x)+(a*M-o*e)*(i*b-p*x)+(r*h-n*s)*(u*l-c*f)-(r*M-o*s)*(u*b-p*f)+(n*M-o*h)*(u*x-i*f)}function c(t,a,r){var n=a[0],o=a[1],e=a[2],s=a[3],h=a[4],M=a[5],u=a[6],i=a[7],p=a[8],c=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3];return t[0]=P*n+O*h+E*p+S*b,t[1]=P*o+O*M+E*c+S*l,t[2]=P*e+O*u+E*f+S*v,t[3]=P*s+O*i+E*x+S*m,P=r[4],O=r[5],E=r[6],S=r[7],t[4]=P*n+O*h+E*p+S*b,t[5]=P*o+O*M+E*c+S*l,t[6]=P*e+O*u+E*f+S*v,t[7]=P*s+O*i+E*x+S*m,P=r[8],O=r[9],E=r[10],S=r[11],t[8]=P*n+O*h+E*p+S*b,t[9]=P*o+O*M+E*c+S*l,t[10]=P*e+O*u+E*f+S*v,t[11]=P*s+O*i+E*x+S*m,P=r[12],O=r[13],E=r[14],S=r[15],t[12]=P*n+O*h+E*p+S*b,t[13]=P*o+O*M+E*c+S*l,t[14]=P*e+O*u+E*f+S*v,t[15]=P*s+O*i+E*x+S*m,t}function f(t,a,r){var n,o,e,s,h,M,u,i,p,c,f,x,b=r[0],l=r[1],v=r[2];return a===t?(t[12]=a[0]*b+a[4]*l+a[8]*v+a[12],t[13]=a[1]*b+a[5]*l+a[9]*v+a[13],t[14]=a[2]*b+a[6]*l+a[10]*v+a[14],t[15]=a[3]*b+a[7]*l+a[11]*v+a[15]):(n=a[0],o=a[1],e=a[2],s=a[3],h=a[4],M=a[5],u=a[6],i=a[7],p=a[8],c=a[9],f=a[10],x=a[11],t[0]=n,t[1]=o,t[2]=e,t[3]=s,t[4]=h,t[5]=M,t[6]=u,t[7]=i,t[8]=p,t[9]=c,t[10]=f,t[11]=x,t[12]=n*b+h*l+p*v+a[12],t[13]=o*b+M*l+c*v+a[13],t[14]=e*b+u*l+f*v+a[14],t[15]=s*b+i*l+x*v+a[15]),t}function x(t,a,r){var n=r[0],o=r[1],e=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*o,t[5]=a[5]*o,t[6]=a[6]*o,t[7]=a[7]*o,t[8]=a[8]*e,t[9]=a[9]*e,t[10]=a[10]*e,t[11]=a[11]*e,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function b(a,r,n,o){var e,s,h,M,u,i,p,c,f,x,b,l,v,m,P,O,E,S,w,I,L,N,q,R,d=o[0],g=o[1],A=o[2],y=Math.sqrt(d*d+g*g+A*A);return y<t.EPSILON?null:(d*=y=1/y,g*=y,A*=y,e=Math.sin(n),h=1-(s=Math.cos(n)),M=r[0],u=r[1],i=r[2],p=r[3],c=r[4],f=r[5],x=r[6],b=r[7],l=r[8],v=r[9],m=r[10],P=r[11],O=d*d*h+s,E=g*d*h+A*e,S=A*d*h-g*e,w=d*g*h-A*e,I=g*g*h+s,L=A*g*h+d*e,N=d*A*h+g*e,q=g*A*h-d*e,R=A*A*h+s,a[0]=M*O+c*E+l*S,a[1]=u*O+f*E+v*S,a[2]=i*O+x*E+m*S,a[3]=p*O+b*E+P*S,a[4]=M*w+c*I+l*L,a[5]=u*w+f*I+v*L,a[6]=i*w+x*I+m*L,a[7]=p*w+b*I+P*L,a[8]=M*N+c*q+l*R,a[9]=u*N+f*q+v*R,a[10]=i*N+x*q+m*R,a[11]=p*N+b*q+P*R,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function l(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[4],s=a[5],h=a[6],M=a[7],u=a[8],i=a[9],p=a[10],c=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=e*o+u*n,t[5]=s*o+i*n,t[6]=h*o+p*n,t[7]=M*o+c*n,t[8]=u*o-e*n,t[9]=i*o-s*n,t[10]=p*o-h*n,t[11]=c*o-M*n,t}function v(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[0],s=a[1],h=a[2],M=a[3],u=a[8],i=a[9],p=a[10],c=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o-u*n,t[1]=s*o-i*n,t[2]=h*o-p*n,t[3]=M*o-c*n,t[8]=e*n+u*o,t[9]=s*n+i*o,t[10]=h*n+p*o,t[11]=M*n+c*o,t}function m(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[0],s=a[1],h=a[2],M=a[3],u=a[4],i=a[5],p=a[6],c=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o+u*n,t[1]=s*o+i*n,t[2]=h*o+p*n,t[3]=M*o+c*n,t[4]=u*o-e*n,t[5]=i*o-s*n,t[6]=p*o-h*n,t[7]=c*o-M*n,t}function P(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function O(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(a,r,n){var o,e,s,h=n[0],M=n[1],u=n[2],i=Math.sqrt(h*h+M*M+u*u);return i<t.EPSILON?null:(h*=i=1/i,M*=i,u*=i,o=Math.sin(r),s=1-(e=Math.cos(r)),a[0]=h*h*s+e,a[1]=M*h*s+u*o,a[2]=u*h*s-M*o,a[3]=0,a[4]=h*M*s-u*o,a[5]=M*M*s+e,a[6]=u*M*s+h*o,a[7]=0,a[8]=h*u*s+M*o,a[9]=M*u*s-h*o,a[10]=u*u*s+e,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function S(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,a,r){var n=a[0],o=a[1],e=a[2],s=a[3],h=n+n,M=o+o,u=e+e,i=n*h,p=n*M,c=n*u,f=o*M,x=o*u,b=e*u,l=s*h,v=s*M,m=s*u;return t[0]=1-(f+b),t[1]=p+m,t[2]=c-v,t[3]=0,t[4]=p-m,t[5]=1-(i+b),t[6]=x+l,t[7]=0,t[8]=c+v,t[9]=x-l,t[10]=1-(i+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function N(a,r){var n=new t.ARRAY_TYPE(3),o=-r[0],e=-r[1],s=-r[2],h=r[3],M=r[4],u=r[5],i=r[6],p=r[7],c=o*o+e*e+s*s+h*h;return c>0?(n[0]=2*(M*h+p*o+u*s-i*e)/c,n[1]=2*(u*h+p*e+i*o-M*s)/c,n[2]=2*(i*h+p*s+M*e-u*o)/c):(n[0]=2*(M*h+p*o+u*s-i*e),n[1]=2*(u*h+p*e+i*o-M*s),n[2]=2*(i*h+p*s+M*e-u*o)),L(a,r,n),a}function q(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function R(t,a){var r=a[0],n=a[1],o=a[2],e=a[4],s=a[5],h=a[6],M=a[8],u=a[9],i=a[10];return t[0]=Math.sqrt(r*r+n*n+o*o),t[1]=Math.sqrt(e*e+s*s+h*h),t[2]=Math.sqrt(M*M+u*u+i*i),t}function d(t,a){var r=a[0]+a[5]+a[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(a[6]-a[9])/n,t[1]=(a[8]-a[2])/n,t[2]=(a[1]-a[4])/n):a[0]>a[5]&&a[0]>a[10]?(n=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/n,t[0]=.25*n,t[1]=(a[1]+a[4])/n,t[2]=(a[8]+a[2])/n):a[5]>a[10]?(n=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/n,t[0]=(a[1]+a[4])/n,t[1]=.25*n,t[2]=(a[6]+a[9])/n):(n=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/n,t[0]=(a[8]+a[2])/n,t[1]=(a[6]+a[9])/n,t[2]=.25*n),t}function g(t,a,r,n){var o=a[0],e=a[1],s=a[2],h=a[3],M=o+o,u=e+e,i=s+s,p=o*M,c=o*u,f=o*i,x=e*u,b=e*i,l=s*i,v=h*M,m=h*u,P=h*i,O=n[0],E=n[1],S=n[2];return t[0]=(1-(x+l))*O,t[1]=(c+P)*O,t[2]=(f-m)*O,t[3]=0,t[4]=(c-P)*E,t[5]=(1-(p+l))*E,t[6]=(b+v)*E,t[7]=0,t[8]=(f+m)*S,t[9]=(b-v)*S,t[10]=(1-(p+x))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function A(t,a,r,n,o){var e=a[0],s=a[1],h=a[2],M=a[3],u=e+e,i=s+s,p=h+h,c=e*u,f=e*i,x=e*p,b=s*i,l=s*p,v=h*p,m=M*u,P=M*i,O=M*p,E=n[0],S=n[1],w=n[2],I=o[0],L=o[1],N=o[2],q=(1-(b+v))*E,R=(f+O)*E,d=(x-P)*E,g=(f-O)*S,A=(1-(c+v))*S,y=(l+m)*S,Y=(x+P)*w,T=(l-m)*w,_=(1-(c+b))*w;return t[0]=q,t[1]=R,t[2]=d,t[3]=0,t[4]=g,t[5]=A,t[6]=y,t[7]=0,t[8]=Y,t[9]=T,t[10]=_,t[11]=0,t[12]=r[0]+I-(q*I+g*L+Y*N),t[13]=r[1]+L-(R*I+A*L+T*N),t[14]=r[2]+N-(d*I+y*L+_*N),t[15]=1,t}function y(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],s=r+r,h=n+n,M=o+o,u=r*s,i=n*s,p=n*h,c=o*s,f=o*h,x=o*M,b=e*s,l=e*h,v=e*M;return t[0]=1-p-x,t[1]=i+v,t[2]=c-l,t[3]=0,t[4]=i-v,t[5]=1-u-x,t[6]=f+b,t[7]=0,t[8]=c+l,t[9]=f-b,t[10]=1-u-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Y(t,a,r,n,o,e,s){var h=1/(r-a),M=1/(o-n),u=1/(e-s);return t[0]=2*e*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*e*M,t[6]=0,t[7]=0,t[8]=(r+a)*h,t[9]=(o+n)*M,t[10]=(s+e)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*e*2*u,t[15]=0,t}function T(t,a,r,n,o){var e,s=1/Math.tan(a/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(e=1/(n-o),t[10]=(o+n)*e,t[14]=2*o*n*e):(t[10]=-1,t[14]=-2*n),t}function _(t,a,r,n){var o=Math.tan(a.upDegrees*Math.PI/180),e=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),h=Math.tan(a.rightDegrees*Math.PI/180),M=2/(s+h),u=2/(o+e);return t[0]=M,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(s-h)*M*.5,t[9]=(o-e)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function j(t,a,r,n,o,e,s){var h=1/(a-r),M=1/(n-o),u=1/(e-s);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*M,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(a+r)*h,t[13]=(o+n)*M,t[14]=(s+e)*u,t[15]=1,t}function D(a,r,n,o){var e,s,M,u,i,p,c,f,x,b,l=r[0],v=r[1],m=r[2],P=o[0],O=o[1],E=o[2],S=n[0],w=n[1],I=n[2];return Math.abs(l-S)<t.EPSILON&&Math.abs(v-w)<t.EPSILON&&Math.abs(m-I)<t.EPSILON?h(a):(c=l-S,f=v-w,x=m-I,e=O*(x*=b=1/Math.sqrt(c*c+f*f+x*x))-E*(f*=b),s=E*(c*=b)-P*x,M=P*f-O*c,(b=Math.sqrt(e*e+s*s+M*M))?(e*=b=1/b,s*=b,M*=b):(e=0,s=0,M=0),u=f*M-x*s,i=x*e-c*M,p=c*s-f*e,(b=Math.sqrt(u*u+i*i+p*p))?(u*=b=1/b,i*=b,p*=b):(u=0,i=0,p=0),a[0]=e,a[1]=u,a[2]=c,a[3]=0,a[4]=s,a[5]=i,a[6]=f,a[7]=0,a[8]=M,a[9]=p,a[10]=x,a[11]=0,a[12]=-(e*l+s*v+M*m),a[13]=-(u*l+i*v+p*m),a[14]=-(c*l+f*v+x*m),a[15]=1,a)}function F(t,a,r,n){var o=a[0],e=a[1],s=a[2],h=n[0],M=n[1],u=n[2],i=o-r[0],p=e-r[1],c=s-r[2],f=i*i+p*p+c*c;f>0&&(i*=f=1/Math.sqrt(f),p*=f,c*=f);var x=M*c-u*p,b=u*i-h*c,l=h*p-M*i;return(f=x*x+b*b+l*l)>0&&(x*=f=1/Math.sqrt(f),b*=f,l*=f),t[0]=x,t[1]=b,t[2]=l,t[3]=0,t[4]=p*l-c*b,t[5]=c*x-i*l,t[6]=i*b-p*x,t[7]=0,t[8]=i,t[9]=p,t[10]=c,t[11]=0,t[12]=o,t[13]=e,t[14]=s,t[15]=1,t}function Q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function X(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function Z(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function k(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function z(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t}function B(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(a,r){var n=a[0],o=a[1],e=a[2],s=a[3],h=a[4],M=a[5],u=a[6],i=a[7],p=a[8],c=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3],w=r[4],I=r[5],L=r[6],N=r[7],q=r[8],R=r[9],d=r[10],g=r[11],A=r[12],y=r[13],Y=r[14],T=r[15];return Math.abs(n-P)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(o-O)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(e-E)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(E))&&Math.abs(s-S)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(h-w)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(M-I)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs(u-L)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(i-N)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(N))&&Math.abs(p-q)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(q))&&Math.abs(c-R)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(f-d)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))&&Math.abs(x-g)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(g))&&Math.abs(b-A)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(A))&&Math.abs(l-y)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(v-Y)<=t.EPSILON*Math.max(1,Math.abs(v),Math.abs(Y))&&Math.abs(m-T)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))}var G=c;exports.mul=G;var H=Z;exports.sub=H;
},{"./common.js":"XJqx"}],"AWBd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.length=o,exports.fromValues=a,exports.copy=s,exports.set=u,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=x,exports.ceil=f,exports.floor=h,exports.min=M,exports.max=v,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=P,exports.squaredLength=O,exports.negate=q,exports.inverse=A,exports.normalize=y,exports.dot=E,exports.cross=R,exports.lerp=g,exports.hermite=Y,exports.bezier=_,exports.random=j,exports.transformMat4=D,exports.transformMat3=w,exports.transformQuat=L,exports.rotateX=I,exports.rotateY=N,exports.rotateZ=T,exports.angle=z,exports.zero=S,exports.str=F,exports.exactEquals=Q,exports.equals=V,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(3);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function n(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function o(t){var r=t[0],e=t[1],n=t[2];return Math.sqrt(r*r+e*e+n*n)}function a(r,e,n){var o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function s(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function u(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function f(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function v(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.sqrt(e*e+n*n+o*o)}function P(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function O(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function q(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function A(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function y(t,r){var e=r[0],n=r[1],o=r[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function R(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return t[0]=o*i-a*u,t[1]=a*s-n*i,t[2]=n*u-o*s,t}function g(t,r,e,n){var o=r[0],a=r[1],s=r[2];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t}function Y(t,r,e,n,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),p=s*(3-2*a);return t[0]=r[0]*u+e[0]*i+n[0]*c+o[0]*p,t[1]=r[1]*u+e[1]*i+n[1]*c+o[1]*p,t[2]=r[2]*u+e[2]*i+n[2]*c+o[2]*p,t}function _(t,r,e,n,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,p=3*a*u,x=3*i*s,f=i*a;return t[0]=r[0]*c+e[0]*p+n[0]*x+o[0]*f,t[1]=r[1]*c+e[1]*p+n[1]*x+o[1]*f,t[2]=r[2]*c+e[2]*p+n[2]*x+o[2]*f,t}function j(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=o*e,r}function D(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[3]*n+e[7]*o+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*o+e[8]*a+e[12])/s,t[1]=(e[1]*n+e[5]*o+e[9]*a+e[13])/s,t[2]=(e[2]*n+e[6]*o+e[10]*a+e[14])/s,t}function w(t,r,e){var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[3]+a*e[6],t[1]=n*e[1]+o*e[4]+a*e[7],t[2]=n*e[2]+o*e[5]+a*e[8],t}function L(t,r,e){var n=e[0],o=e[1],a=e[2],s=e[3],u=r[0],i=r[1],c=r[2],p=o*c-a*i,x=a*u-n*c,f=n*i-o*u,h=o*f-a*x,M=a*p-n*f,v=n*x-o*p,l=2*s;return p*=l,x*=l,f*=l,h*=2,M*=2,v*=2,t[0]=u+p+h,t[1]=i+x+M,t[2]=c+f+v,t}function I(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function N(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function T(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function z(t,r){var e=a(t[0],t[1],t[2]),n=a(r[0],r[1],r[2]);y(e,e),y(n,n);var o=E(e,n);return o>1?0:o<-1?Math.PI:Math.acos(o)}function S(t){return t[0]=0,t[1]=0,t[2]=0,t}function F(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Q(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function V(r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var X=c;exports.sub=X;var Z=p;exports.mul=Z;var k=x;exports.div=k;var B=b;exports.dist=B;var C=P;exports.sqrDist=C;var G=o;exports.len=G;var H=O;exports.sqrLen=H;var J=function(){var t=e();return function(r,e,n,o,a,s){var u,i;for(e||(e=3),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"9+zW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.fromValues=o,exports.copy=a,exports.set=s,exports.add=u,exports.subtract=i,exports.multiply=c,exports.divide=p,exports.ceil=x,exports.floor=f,exports.min=h,exports.max=M,exports.round=l,exports.scale=v,exports.scaleAndAdd=d,exports.distance=m,exports.squaredDistance=b,exports.length=O,exports.squaredLength=A,exports.negate=P,exports.inverse=q,exports.normalize=R,exports.dot=E,exports.cross=y,exports.lerp=D,exports.random=g,exports.transformMat4=w,exports.transformQuat=N,exports.zero=Y,exports.str=_,exports.exactEquals=j,exports.equals=L,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function n(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function o(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function a(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function u(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function i(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function c(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function p(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function f(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function h(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function M(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function v(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function d(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function m(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return Math.sqrt(e*e+n*n+o*o+a*a)}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return e*e+n*n+o*o+a*a}function O(t){var r=t[0],e=t[1],n=t[2],o=t[3];return Math.sqrt(r*r+e*e+n*n+o*o)}function A(t){var r=t[0],e=t[1],n=t[2],o=t[3];return r*r+e*e+n*n+o*o}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function q(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function R(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],s=e*e+n*n+o*o+a*a;return s>0&&(s=1/Math.sqrt(s)),t[0]=e*s,t[1]=n*s,t[2]=o*s,t[3]=a*s,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function y(t,r,e,n){var o=e[0]*n[1]-e[1]*n[0],a=e[0]*n[2]-e[2]*n[0],s=e[0]*n[3]-e[3]*n[0],u=e[1]*n[2]-e[2]*n[1],i=e[1]*n[3]-e[3]*n[1],c=e[2]*n[3]-e[3]*n[2],p=r[0],x=r[1],f=r[2],h=r[3];return t[0]=x*c-f*i+h*u,t[1]=-p*c+f*s-h*a,t[2]=p*i-x*s+h*o,t[3]=-p*u+x*a-f*o,t}function D(t,r,e,n){var o=r[0],a=r[1],s=r[2],u=r[3];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t[3]=u+n*(e[3]-u),t}function g(r,e){var n,o,a,s,u,i;e=e||1;do{u=(n=2*t.RANDOM()-1)*n+(o=2*t.RANDOM()-1)*o}while(u>=1);do{i=(a=2*t.RANDOM()-1)*a+(s=2*t.RANDOM()-1)*s}while(i>=1);var c=Math.sqrt((1-u)/i);return r[0]=e*n,r[1]=e*o,r[2]=e*a*c,r[3]=e*s*c,r}function w(t,r,e){var n=r[0],o=r[1],a=r[2],s=r[3];return t[0]=e[0]*n+e[4]*o+e[8]*a+e[12]*s,t[1]=e[1]*n+e[5]*o+e[9]*a+e[13]*s,t[2]=e[2]*n+e[6]*o+e[10]*a+e[14]*s,t[3]=e[3]*n+e[7]*o+e[11]*a+e[15]*s,t}function N(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2],c=e[3],p=c*n+u*a-i*o,x=c*o+i*n-s*a,f=c*a+s*o-u*n,h=-s*n-u*o-i*a;return t[0]=p*c+h*-s+x*-i-f*-u,t[1]=x*c+h*-u+f*-s-p*-i,t[2]=f*c+h*-i+p*-u-x*-s,t[3]=r[3],t}function Y(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function j(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function L(r,e){var n=r[0],o=r[1],a=r[2],s=r[3],u=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-u)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-p)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))}var I=i;exports.sub=I;var S=c;exports.mul=S;var T=p;exports.div=T;var z=m;exports.dist=z;var F=b;exports.sqrDist=F;var Q=O;exports.len=Q;var V=A;exports.sqrLen=V;var k=function(){var t=e();return function(r,e,n,o,a,s){var u,i;for(e||(e=4),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],t[3]=r[u+3],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2],r[u+3]=t[3];return r}}();exports.forEach=k;
},{"./common.js":"XJqx"}],"1KdR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.identity=n,exports.setAxisAngle=u,exports.getAxisAngle=p,exports.multiply=c,exports.rotateX=i,exports.rotateY=x,exports.rotateZ=l,exports.calculateW=v,exports.slerp=h,exports.random=M,exports.invert=f,exports.conjugate=q,exports.fromMat3=d,exports.fromEuler=m,exports.str=P,exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var r=s(require("./common.js")),t=s(require("./mat3.js")),e=s(require("./vec3.js")),o=s(require("./vec4.js"));function s(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,e):{};o.get||o.set?Object.defineProperty(t,e,o):t[e]=r[e]}return t.default=r,t}function a(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function n(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function u(r,t,e){e*=.5;var o=Math.sin(e);return r[0]=o*t[0],r[1]=o*t[1],r[2]=o*t[2],r[3]=Math.cos(e),r}function p(t,e){var o=2*Math.acos(e[3]),s=Math.sin(o/2);return s>r.EPSILON?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),o}function c(r,t,e){var o=t[0],s=t[1],a=t[2],n=t[3],u=e[0],p=e[1],c=e[2],i=e[3];return r[0]=o*i+n*u+s*c-a*p,r[1]=s*i+n*p+a*u-o*c,r[2]=a*i+n*c+o*p-s*u,r[3]=n*i-o*u-s*p-a*c,r}function i(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p+n*u,r[1]=s*p+a*u,r[2]=a*p-s*u,r[3]=n*p-o*u,r}function x(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p-a*u,r[1]=s*p+n*u,r[2]=a*p+o*u,r[3]=n*p-s*u,r}function l(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p+s*u,r[1]=s*p-o*u,r[2]=a*p+n*u,r[3]=n*p-a*u,r}function v(r,t){var e=t[0],o=t[1],s=t[2];return r[0]=e,r[1]=o,r[2]=s,r[3]=Math.sqrt(Math.abs(1-e*e-o*o-s*s)),r}function h(t,e,o,s){var a,n,u,p,c,i=e[0],x=e[1],l=e[2],v=e[3],h=o[0],M=o[1],f=o[2],q=o[3];return(n=i*h+x*M+l*f+v*q)<0&&(n=-n,h=-h,M=-M,f=-f,q=-q),1-n>r.EPSILON?(a=Math.acos(n),u=Math.sin(a),p=Math.sin((1-s)*a)/u,c=Math.sin(s*a)/u):(p=1-s,c=s),t[0]=p*i+c*h,t[1]=p*x+c*M,t[2]=p*l+c*f,t[3]=p*v+c*q,t}function M(t){var e=r.RANDOM(),o=r.RANDOM(),s=r.RANDOM(),a=Math.sqrt(1-e),n=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*o),t[1]=a*Math.cos(2*Math.PI*o),t[2]=n*Math.sin(2*Math.PI*s),t[3]=n*Math.cos(2*Math.PI*s),t}function f(r,t){var e=t[0],o=t[1],s=t[2],a=t[3],n=e*e+o*o+s*s+a*a,u=n?1/n:0;return r[0]=-e*u,r[1]=-o*u,r[2]=-s*u,r[3]=a*u,r}function q(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r}function d(r,t){var e,o=t[0]+t[4]+t[8];if(o>0)e=Math.sqrt(o+1),r[3]=.5*e,e=.5/e,r[0]=(t[5]-t[7])*e,r[1]=(t[6]-t[2])*e,r[2]=(t[1]-t[3])*e;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);var a=(s+1)%3,n=(s+2)%3;e=Math.sqrt(t[3*s+s]-t[3*a+a]-t[3*n+n]+1),r[s]=.5*e,e=.5/e,r[3]=(t[3*a+n]-t[3*n+a])*e,r[a]=(t[3*a+s]+t[3*s+a])*e,r[n]=(t[3*n+s]+t[3*s+n])*e}return r}function m(r,t,e,o){var s=.5*Math.PI/180;t*=s,e*=s,o*=s;var a=Math.sin(t),n=Math.cos(t),u=Math.sin(e),p=Math.cos(e),c=Math.sin(o),i=Math.cos(o);return r[0]=a*p*i-n*u*c,r[1]=n*u*i+a*p*c,r[2]=n*p*c-a*u*i,r[3]=n*p*i+a*u*c,r}function P(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}var A=o.clone;exports.clone=A;var O=o.fromValues;exports.fromValues=O;var g=o.copy;exports.copy=g;var y=o.set;exports.set=y;var j=o.add;exports.add=j;var E=c;exports.mul=E;var I=o.scale;exports.scale=I;var b=o.dot;exports.dot=b;var L=o.lerp;exports.lerp=L;var R=o.length;exports.length=R;var _=R;exports.len=_;var D=o.squaredLength;exports.squaredLength=D;var N=D;exports.sqrLen=N;var V=o.normalize;exports.normalize=V;var Y=o.exactEquals;exports.exactEquals=Y;var w=o.equals;exports.equals=w;var z=function(){var r=e.create(),t=e.fromValues(1,0,0),o=e.fromValues(0,1,0);return function(s,a,n){var p=e.dot(a,n);return p<-.999999?(e.cross(r,t,a),e.len(r)<1e-6&&e.cross(r,o,a),e.normalize(r,r),u(s,r,Math.PI),s):p>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(e.cross(r,a,n),s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=1+p,V(s,s))}}();exports.rotationTo=z;var T=function(){var r=a(),t=a();return function(e,o,s,a,n,u){return h(r,o,n,u),h(t,s,a,u),h(e,r,t,2*u*(1-u)),e}}();exports.sqlerp=T;var S=function(){var r=t.create();return function(t,e,o,s){return r[0]=o[0],r[3]=o[1],r[6]=o[2],r[1]=s[0],r[4]=s[1],r[7]=s[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],V(t,d(t,r))}}();exports.setAxes=S;
},{"./common.js":"XJqx","./mat3.js":"vtQf","./vec3.js":"AWBd","./vec4.js":"9+zW"}],"6buG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=s,exports.fromRotationTranslationValues=u,exports.fromRotationTranslation=p,exports.fromTranslation=i,exports.fromRotation=x,exports.fromMat4=c,exports.copy=f,exports.identity=h,exports.set=M,exports.getDual=l,exports.setDual=P,exports.getTranslation=m,exports.translate=R,exports.rotateX=d,exports.rotateY=O,exports.rotateZ=g,exports.rotateByQuatAppend=A,exports.rotateByQuatPrepend=E,exports.rotateAroundAxis=y,exports.add=q,exports.multiply=L,exports.scale=T,exports.lerp=_,exports.invert=I,exports.conjugate=N,exports.normalize=Q,exports.str=V,exports.exactEquals=X,exports.equals=Z,exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.dot=exports.mul=exports.setReal=exports.getReal=void 0;var t=a(require("./common.js")),r=a(require("./quat.js")),e=a(require("./mat4.js"));function a(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};a.get||a.set?Object.defineProperty(r,e,a):r[e]=t[e]}return r.default=t,r}function n(){var r=new t.ARRAY_TYPE(8);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function o(r){var e=new t.ARRAY_TYPE(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function s(r,e,a,n,o,s,u,p){var i=new t.ARRAY_TYPE(8);return i[0]=r,i[1]=e,i[2]=a,i[3]=n,i[4]=o,i[5]=s,i[6]=u,i[7]=p,i}function u(r,e,a,n,o,s,u){var p=new t.ARRAY_TYPE(8);p[0]=r,p[1]=e,p[2]=a,p[3]=n;var i=.5*o,x=.5*s,c=.5*u;return p[4]=i*n+x*a-c*e,p[5]=x*n+c*r-i*a,p[6]=c*n+i*e-x*r,p[7]=-i*r-x*e-c*a,p}function p(t,r,e){var a=.5*e[0],n=.5*e[1],o=.5*e[2],s=r[0],u=r[1],p=r[2],i=r[3];return t[0]=s,t[1]=u,t[2]=p,t[3]=i,t[4]=a*i+n*p-o*u,t[5]=n*i+o*s-a*p,t[6]=o*i+a*u-n*s,t[7]=-a*s-n*u-o*p,t}function i(t,r){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*r[0],t[5]=.5*r[1],t[6]=.5*r[2],t[7]=0,t}function x(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function c(a,n){var o=r.create();e.getRotation(o,n);var s=new t.ARRAY_TYPE(3);return e.getTranslation(s,n),p(a,o,s),a}function f(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}function h(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function M(t,r,e,a,n,o,s,u,p){return t[0]=r,t[1]=e,t[2]=a,t[3]=n,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t}var v=r.copy;function l(t,r){return t[0]=r[4],t[1]=r[5],t[2]=r[6],t[3]=r[7],t}exports.getReal=v;var b=r.copy;function P(t,r){return t[4]=r[0],t[5]=r[1],t[6]=r[2],t[7]=r[3],t}function m(t,r){var e=r[4],a=r[5],n=r[6],o=r[7],s=-r[0],u=-r[1],p=-r[2],i=r[3];return t[0]=2*(e*i+o*s+a*p-n*u),t[1]=2*(a*i+o*u+n*s-e*p),t[2]=2*(n*i+o*p+e*u-a*s),t}function R(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=.5*e[0],p=.5*e[1],i=.5*e[2],x=r[4],c=r[5],f=r[6],h=r[7];return t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=s*u+n*i-o*p+x,t[5]=s*p+o*u-a*i+c,t[6]=s*i+a*p-n*u+f,t[7]=-a*u-n*p-o*i+h,t}function d(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],x=e[6],c=e[7],f=p*u+c*n+i*s-x*o,h=i*u+c*o+x*n-p*s,M=x*u+c*s+p*o-i*n,v=c*u-p*n-i*o-x*s;return r.rotateX(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=f*u+v*n+h*s-M*o,t[5]=h*u+v*o+M*n-f*s,t[6]=M*u+v*s+f*o-h*n,t[7]=v*u-f*n-h*o-M*s,t}function O(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],x=e[6],c=e[7],f=p*u+c*n+i*s-x*o,h=i*u+c*o+x*n-p*s,M=x*u+c*s+p*o-i*n,v=c*u-p*n-i*o-x*s;return r.rotateY(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=f*u+v*n+h*s-M*o,t[5]=h*u+v*o+M*n-f*s,t[6]=M*u+v*s+f*o-h*n,t[7]=v*u-f*n-h*o-M*s,t}function g(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],x=e[6],c=e[7],f=p*u+c*n+i*s-x*o,h=i*u+c*o+x*n-p*s,M=x*u+c*s+p*o-i*n,v=c*u-p*n-i*o-x*s;return r.rotateZ(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=f*u+v*n+h*s-M*o,t[5]=h*u+v*o+M*n-f*s,t[6]=M*u+v*s+f*o-h*n,t[7]=v*u-f*n-h*o-M*s,t}function A(t,r,e){var a=e[0],n=e[1],o=e[2],s=e[3],u=r[0],p=r[1],i=r[2],x=r[3];return t[0]=u*s+x*a+p*o-i*n,t[1]=p*s+x*n+i*a-u*o,t[2]=i*s+x*o+u*n-p*a,t[3]=x*s-u*a-p*n-i*o,u=r[4],p=r[5],i=r[6],x=r[7],t[4]=u*s+x*a+p*o-i*n,t[5]=p*s+x*n+i*a-u*o,t[6]=i*s+x*o+u*n-p*a,t[7]=x*s-u*a-p*n-i*o,t}function E(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[0],p=e[1],i=e[2],x=e[3];return t[0]=a*x+s*u+n*i-o*p,t[1]=n*x+s*p+o*u-a*i,t[2]=o*x+s*i+a*p-n*u,t[3]=s*x-a*u-n*p-o*i,u=e[4],p=e[5],i=e[6],x=e[7],t[4]=a*x+s*u+n*i-o*p,t[5]=n*x+s*p+o*u-a*i,t[6]=o*x+s*i+a*p-n*u,t[7]=s*x-a*u-n*p-o*i,t}function y(r,e,a,n){if(Math.abs(n)<t.EPSILON)return f(r,e);var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);n*=.5;var s=Math.sin(n),u=s*a[0]/o,p=s*a[1]/o,i=s*a[2]/o,x=Math.cos(n),c=e[0],h=e[1],M=e[2],v=e[3];r[0]=c*x+v*u+h*i-M*p,r[1]=h*x+v*p+M*u-c*i,r[2]=M*x+v*i+c*p-h*u,r[3]=v*x-c*u-h*p-M*i;var l=e[4],b=e[5],P=e[6],m=e[7];return r[4]=l*x+m*u+b*i-P*p,r[5]=b*x+m*p+P*u-l*i,r[6]=P*x+m*i+l*p-b*u,r[7]=m*x-l*u-b*p-P*i,r}function q(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t}function L(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[4],p=e[5],i=e[6],x=e[7],c=r[4],f=r[5],h=r[6],M=r[7],v=e[0],l=e[1],b=e[2],P=e[3];return t[0]=a*P+s*v+n*b-o*l,t[1]=n*P+s*l+o*v-a*b,t[2]=o*P+s*b+a*l-n*v,t[3]=s*P-a*v-n*l-o*b,t[4]=a*x+s*u+n*i-o*p+c*P+M*v+f*b-h*l,t[5]=n*x+s*p+o*u-a*i+f*P+M*l+h*v-c*b,t[6]=o*x+s*i+a*p-n*u+h*P+M*b+c*l-f*v,t[7]=s*x-a*u-n*p-o*i+M*P-c*v-f*l-h*b,t}exports.setReal=b;var Y=L;function T(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t}exports.mul=Y;var j=r.dot;function _(t,r,e,a){var n=1-a;return j(r,e)<0&&(a=-a),t[0]=r[0]*n+e[0]*a,t[1]=r[1]*n+e[1]*a,t[2]=r[2]*n+e[2]*a,t[3]=r[3]*n+e[3]*a,t[4]=r[4]*n+e[4]*a,t[5]=r[5]*n+e[5]*a,t[6]=r[6]*n+e[6]*a,t[7]=r[7]*n+e[7]*a,t}function I(t,r){var e=D(r);return t[0]=-r[0]/e,t[1]=-r[1]/e,t[2]=-r[2]/e,t[3]=r[3]/e,t[4]=-r[4]/e,t[5]=-r[5]/e,t[6]=-r[6]/e,t[7]=r[7]/e,t}function N(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=r[7],t}exports.dot=j;var S=r.length;exports.length=S;var w=S;exports.len=w;var D=r.squaredLength;exports.squaredLength=D;var B=D;function Q(t,r){var e=D(r);if(e>0){e=Math.sqrt(e);var a=r[0]/e,n=r[1]/e,o=r[2]/e,s=r[3]/e,u=r[4],p=r[5],i=r[6],x=r[7],c=a*u+n*p+o*i+s*x;t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=(u-a*c)/e,t[5]=(p-n*c)/e,t[6]=(i-o*c)/e,t[7]=(x-s*c)/e}return t}function V(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function X(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]}function Z(r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],x=r[7],c=e[0],f=e[1],h=e[2],M=e[3],v=e[4],l=e[5],b=e[6],P=e[7];return Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(n-f)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-M)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-v)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(p-l)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(l))&&Math.abs(i-b)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(x-P)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(P))}exports.sqrLen=B;
},{"./common.js":"XJqx","./quat.js":"1KdR","./mat4.js":"w3aR"}],"XSo1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.fromValues=o,exports.copy=a,exports.set=s,exports.add=u,exports.subtract=i,exports.multiply=c,exports.divide=p,exports.ceil=x,exports.floor=f,exports.min=v,exports.max=h,exports.round=M,exports.scale=l,exports.scaleAndAdd=d,exports.distance=m,exports.squaredDistance=b,exports.length=q,exports.squaredLength=P,exports.negate=A,exports.inverse=O,exports.normalize=y,exports.dot=g,exports.cross=E,exports.lerp=R,exports.random=Y,exports.transformMat2=_,exports.transformMat2d=j,exports.transformMat3=w,exports.transformMat4=D,exports.rotate=L,exports.angle=I,exports.zero=T,exports.str=N,exports.exactEquals=z,exports.equals=S,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var r=t(require("./common.js"));function t(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,e):{};n.get||n.set?Object.defineProperty(t,e,n):t[e]=r[e]}return t.default=r,t}function e(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function n(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function o(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function a(r,t){return r[0]=t[0],r[1]=t[1],r}function s(r,t,e){return r[0]=t,r[1]=e,r}function u(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function i(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function c(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r}function p(r,t,e){return r[0]=t[0]/e[0],r[1]=t[1]/e[1],r}function x(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r}function f(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r}function v(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function h(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}function M(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r}function l(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function d(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function m(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.sqrt(e*e+n*n)}function b(r,t){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function q(r){var t=r[0],e=r[1];return Math.sqrt(t*t+e*e)}function P(r){var t=r[0],e=r[1];return t*t+e*e}function A(r,t){return r[0]=-t[0],r[1]=-t[1],r}function O(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}function y(r,t){var e=t[0],n=t[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o)),r[0]=t[0]*o,r[1]=t[1]*o,r}function g(r,t){return r[0]*t[0]+r[1]*t[1]}function E(r,t,e){var n=t[0]*e[1]-t[1]*e[0];return r[0]=r[1]=0,r[2]=n,r}function R(r,t,e,n){var o=t[0],a=t[1];return r[0]=o+n*(e[0]-o),r[1]=a+n*(e[1]-a),r}function Y(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function _(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o,r[1]=e[1]*n+e[3]*o,r}function j(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o+e[4],r[1]=e[1]*n+e[3]*o+e[5],r}function w(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[3]*o+e[6],r[1]=e[1]*n+e[4]*o+e[7],r}function D(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[4]*o+e[12],r[1]=e[1]*n+e[5]*o+e[13],r}function L(r,t,e,n){var o=t[0]-e[0],a=t[1]-e[1],s=Math.sin(n),u=Math.cos(n);return r[0]=o*u-a*s+e[0],r[1]=o*s+a*u+e[1],r}function I(r,t){var e=r[0],n=r[1],o=t[0],a=t[1],s=e*e+n*n;s>0&&(s=1/Math.sqrt(s));var u=o*o+a*a;u>0&&(u=1/Math.sqrt(u));var i=(e*o+n*a)*s*u;return i>1?0:i<-1?Math.PI:Math.acos(i)}function T(r){return r[0]=0,r[1]=0,r}function N(r){return"vec2("+r[0]+", "+r[1]+")"}function z(r,t){return r[0]===t[0]&&r[1]===t[1]}function S(t,e){var n=t[0],o=t[1],a=e[0],s=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))}var F=q;exports.len=F;var V=i;exports.sub=V;var k=c;exports.mul=k;var B=p;exports.div=B;var C=m;exports.dist=C;var G=b;exports.sqrDist=G;var H=P;exports.sqrLen=H;var J=function(){var r=e();return function(t,e,n,o,a,s){var u,i;for(e||(e=2),n||(n=0),i=o?Math.min(o*e+n,t.length):t.length,u=n;u<i;u+=e)r[0]=t[u],r[1]=t[u+1],a(r,r,s),t[u]=r[0],t[u+1]=r[1];return t}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"IF0X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vec4=exports.vec3=exports.vec2=exports.quat2=exports.quat=exports.mat4=exports.mat3=exports.mat2d=exports.mat2=exports.glMatrix=void 0;var e=x(require("./common.js"));exports.glMatrix=e;var r=x(require("./mat2.js"));exports.mat2=r;var t=x(require("./mat2d.js"));exports.mat2d=t;var s=x(require("./mat3.js"));exports.mat3=s;var o=x(require("./mat4.js"));exports.mat4=o;var a=x(require("./quat.js"));exports.quat=a;var p=x(require("./quat2.js"));exports.quat2=p;var u=x(require("./vec2.js"));exports.vec2=u;var i=x(require("./vec3.js"));exports.vec3=i;var v=x(require("./vec4.js"));function x(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};s.get||s.set?Object.defineProperty(r,t,s):r[t]=e[t]}return r.default=e,r}exports.vec4=v;
},{"./common.js":"XJqx","./mat2.js":"eN7R","./mat2d.js":"M21d","./mat3.js":"vtQf","./mat4.js":"w3aR","./quat.js":"1KdR","./quat2.js":"6buG","./vec2.js":"XSo1","./vec3.js":"AWBd","./vec4.js":"9+zW"}],"GxBv":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var r=require("../ogl_globals"),o=function(){function o(o,e){var t=this.compileCode(o,r.gl.VERTEX_SHADER),l=this.compileCode(e,r.gl.FRAGMENT_SHADER);this.program=r.gl.createProgram(),r.gl.attachShader(this.program,t),r.gl.attachShader(this.program,l),r.gl.linkProgram(this.program),r.gl.deleteShader(t),r.gl.deleteShader(l)}return o.prototype.compileCode=function(o,e){var t=r.gl.createShader(e);if(r.gl.shaderSource(t,o),r.gl.compileShader(t),!r.gl.getShaderParameter(t,r.gl.COMPILE_STATUS)){var l=e==r.gl.VERTEX_SHADER?"Vertex Shader":"Fragment Shader";console.log(r.gl.getShaderInfoLog(t),l)}return t},o.prototype.getUniformLocation=function(o){var e=r.gl.getUniformLocation(this.program,o);return e||console.log("Invalid uniform name ",o),e},o.prototype.setUniformBlockBinding=function(o,e){var t=r.gl.getUniformBlockIndex(this.program,o);t!=r.gl.INVALID_INDEX?r.gl.uniformBlockBinding(this.program,t,e):console.log("Error: Invalid index for block "+o)},o.prototype.start=function(){r.gl.useProgram(this.program)},o.prototype.stop=function(){r.gl.useProgram(null)},o.prototype.delete=function(){r.gl.deleteProgram(this.program),this.program=null},o}();exports.default=o;
},{"../ogl_globals":"rqiD"}],"ChK5":[function(require,module,exports) {
"use strict";exports.__esModule=!0,exports.lit_color_shader_fs="#version 300 es\nprecision mediump float;\nout vec4 FragColor;\n\nin vec3 normal;\nin vec3 toSun;\nin vec3 toCamera;\n\nstruct Material{\n\tvec3 diffuse;\n\tvec3 specular;\n\tfloat shininess;\n};\n\nuniform Material material;\n\nlayout(std140)uniform GlobalFSData{\n\tvec3 sunColor;\n\tfloat sceneAmbient;\n};\n\nvoid main(void){\n\tvec3 in_normal=normalize(normal);\n\tvec3 in_toSun=normalize(toSun);\n\tvec3 in_toCamera=normalize(toCamera);\n\t/* Half Lambert */\n\tfloat halfLamb=(dot(in_toSun,in_normal)*.5f)+.5f;\n\thalfLamb*=halfLamb;\n\tvec3 diffuse=halfLamb*material.diffuse;\n\t/* BlinnPhong */\n\tvec3 halfwayDir=normalize(in_toSun+in_toCamera);\n\tfloat sFactor=pow(max(dot(in_normal,halfwayDir),0.f),material.shininess);\n\tvec3 specular=sFactor*material.specular;\n\tvec3 finalColor=(diffuse+specular)*sunColor;\n\tfinalColor=max(finalColor,sceneAmbient*diffuse);\n\tFragColor=vec4(finalColor,1.f);\n}\n",exports.lit_color_shader_vs="#version 300 es\nlayout(location=0)in vec3 aPosition;\nlayout(location=1)in vec3 aNormal;\n\nout vec3 normal;\nout vec3 toSun;\nout vec3 toCamera;\n\nuniform mat4 tranformationMat;\n\nlayout(std140)uniform GlobalVSData{\n\tmat4 projectionMat;\n\t// mat4 viewMat;\n\tvec3 cameraPosition;\n\tvec3 sunPosition;\n};\n\nvoid main(void){\n\tvec4 worldposition=tranformationMat*vec4(aPosition,1.f);\n\tgl_Position=projectionMat*worldposition;\n\tnormal=mat3(tranformationMat)*aNormal;\n\ttoSun=sunPosition-worldposition.xyz;\n\ttoCamera=cameraPosition-worldposition.xyz;\n}\n",exports.lit_texture_shader_fs="#version 300 es\nprecision mediump float;\nout vec4 FragColor;\n\nin vec3 normal;\nin vec3 toSun;\nin vec3 toCamera;\nin vec2 texCoords;\n\nstruct Material{\n\tsampler2D diffuse;\n\tsampler2D specular;\n\t// sampler2D emission;\n\tfloat shininess;\n};\n\nuniform Material material;\n\nlayout(std140)uniform GlobalFSData{\n\tvec3 sunColor;\n\tfloat sceneAmbient;\n};\n\nvoid main(void){\n\tvec3 in_normal=normalize(normal);\n\tvec3 in_toSun=normalize(toSun);\n\tvec3 in_toCamera=normalize(toCamera);\n\tvec3 samDiffuse=texture(material.diffuse,texCoords).xyz;\n\t/* Half Lambert */\n\tfloat halfLamb=(dot(in_toSun,in_normal)*.5f)+.5f;\n\thalfLamb*=halfLamb;\n\tvec3 diffuse=halfLamb*samDiffuse;\n\t/* BlinnPhong */\n\tvec3 halfwayDir=normalize(in_toSun+in_toCamera);\n\tvec3 specular=vec3(0.f);\n\tif(textureSize(material.specular,0).x!=1){\n\t\tfloat sFactor=pow(max(dot(in_normal,halfwayDir),0.f),material.shininess);\n\t\tvec3 specular=sFactor*texture(material.specular,texCoords).xyz;\n\t}\n\tvec3 finalColor=(diffuse+specular)*sunColor.xyz;\n\tfinalColor=max(finalColor,sceneAmbient*samDiffuse);\n\tFragColor=vec4(finalColor,1.f);\n}\n",exports.lit_texture_shader_vs="#version 300 es\nlayout(location=0)in vec3 aPosition;\nlayout(location=1)in vec3 aNormal;\nlayout(location=3)in vec2 aTexCoords;\n\nout vec3 normal;\nout vec3 toSun;\nout vec3 toCamera;\nout vec2 texCoords;\n\nuniform mat4 tranformationMat;\n\nlayout(std140)uniform GlobalVSData{\n\tmat4 projectionMat;\n\t// mat4 viewMat;\n\tvec3 cameraPosition;\n\tvec3 sunPosition;\n};\n\nvoid main(void){\n\tvec4 worldposition=tranformationMat*vec4(aPosition,1.f);\n\tgl_Position=projectionMat*worldposition;\n\tnormal=mat3(tranformationMat)*aNormal;\n\ttoSun=sunPosition-worldposition.xyz;\n\ttoCamera=cameraPosition-worldposition.xyz;\n\ttexCoords=aTexCoords;\n}\n";
},{}],"uEsE":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r])})(o,r)};return function(o,r){function i(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0;var r=o(require("./shader")),i=require("../ogl_globals"),e=require("./glsl/shader_source"),n=function(o){function r(){var t=o.call(this,e.lit_color_shader_vs,e.lit_color_shader_fs)||this;return t.start(),t.tranformationLoc=t.getUniformLocation("tranformationMat"),t.diffuseLoc=t.getUniformLocation("material.diffuse"),t.specularLoc=t.getUniformLocation("material.specular"),t.shininessLoc=t.getUniformLocation("material.shininess"),t.stop(),t}return t(r,o),r.prototype.loadMaterial=function(t){i.gl.uniform3fv(this.diffuseLoc,t.diffuse),i.gl.uniform3fv(this.specularLoc,t.specular),i.gl.uniform1f(this.shininessLoc,t.shininess)},r.prototype.loadTranformation=function(t){i.gl.uniformMatrix4fv(this.tranformationLoc,!1,t)},r}(r.default);exports.default=n;
},{"./shader":"GxBv","../ogl_globals":"rqiD","./glsl/shader_source":"ChK5"}],"jV6V":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var t=require("../ogl_globals"),i=function(){function i(n){this.total_size=n,this.ubo=t.gl.createBuffer(),t.gl.bindBuffer(t.gl.UNIFORM_BUFFER,this.ubo),t.gl.bufferData(t.gl.UNIFORM_BUFFER,n,t.gl.STREAM_DRAW),t.gl.bindBuffer(t.gl.UNIFORM_BUFFER,null),this.bindingPoint=i.usedBindingPoint++,t.gl.bindBufferBase(t.gl.UNIFORM_BUFFER,this.bindingPoint,this.ubo)}return i.prototype.setBufferData=function(i,n){t.gl.bindBuffer(t.gl.UNIFORM_BUFFER,this.ubo),t.gl.bufferSubData(t.gl.UNIFORM_BUFFER,n,i),t.gl.bindBuffer(t.gl.UNIFORM_BUFFER,null)},i.prototype.getBindingPoint=function(){return this.bindingPoint},i.prototype.release=function(){t.gl.bindBuffer(t.gl.UNIFORM_BUFFER,null),t.gl.deleteBuffer(this.ubo)},i.SIZE_BAISC=4,i.SIZE_VEC2=8,i.SIZE_VEC4=16,i.SIZE_MATRIX4=4*i.SIZE_VEC4,i.SIZE_MATRIX3=3*i.SIZE_VEC4,i.usedBindingPoint=0,i}();exports.default=i;
},{"../ogl_globals":"rqiD"}],"Hpua":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0;var o=e(require("./uniform_buffer")),r=function(e){function r(){return e.call(this,r.TOTAL_SIZE)||this}return t(r,e),r.prototype.setProjectionMatrix=function(t){this.setBufferData(t,r.PROJECTION_MAT_OFFSET)},r.prototype.setCameraPosition=function(t){this.setBufferData(t,r.CAMERA_POS_OFFSET)},r.prototype.setSunPosition=function(t){this.setBufferData(t,r.SUN_POS_OFFSET)},r.PROJECTION_MAT_OFFSET=0,r.CAMERA_POS_OFFSET=o.default.SIZE_MATRIX4,r.SUN_POS_OFFSET=r.CAMERA_POS_OFFSET+o.default.SIZE_VEC4,r.TOTAL_SIZE=r.SUN_POS_OFFSET+o.default.SIZE_VEC4,r}(o.default);exports.default=r;
},{"./uniform_buffer":"jV6V"}],"eV2o":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0;var r=e(require("./uniform_buffer")),o=function(e){function o(){return e.call(this,o.TOTAL_SIZE)||this}return t(o,e),o.prototype.setSunColor=function(t){this.setBufferData(t,o.SUN_COLOR_OFFSET)},o.prototype.setSceneAmbient=function(t){this.setBufferData(new Float32Array([t]),o.SCENE_AMBIENT_OFFSET)},o.SUN_COLOR_OFFSET=0,o.SCENE_AMBIENT_OFFSET=r.default.SIZE_VEC4,o.TOTAL_SIZE=o.SCENE_AMBIENT_OFFSET+r.default.SIZE_BAISC,o}(r.default);exports.default=o;
},{"./uniform_buffer":"jV6V"}],"/ZKO":[function(require,module,exports) {
"use strict";var _,E;exports.__esModule=!0,function(_){_.VERTEX_LOC=0,_.NORMAL_LOC=1,_.UV_LOC=3,_.GlobalVSBuffer="GlobalVSData",_.GlobalFSBuffer="GlobalFSData"}(_=exports.ShaderConfig||(exports.ShaderConfig={})),function(_){_[_.UNLIT_MATERIAL_COLOR_SHADER=0]="UNLIT_MATERIAL_COLOR_SHADER",_[_.UNLIT_MATERIAL_TEXTURE_SHADER=1]="UNLIT_MATERIAL_TEXTURE_SHADER",_[_.LIT_MATERIAL_COLOR_SHADER=2]="LIT_MATERIAL_COLOR_SHADER",_[_.LIT_MATERIAL_TEXTURE_SHADER=3]="LIT_MATERIAL_TEXTURE_SHADER"}(E=exports.MaterialShader||(exports.MaterialShader={}));
},{}],"Cl5f":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(r,o)};return function(r,o){function e(){this.constructor=r}t(r,o),r.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};exports.__esModule=!0;var o=r(require("./shader")),e=require("./glsl/shader_source"),i=require("../ogl_globals"),n=function(r){function o(){var t=r.call(this,e.lit_texture_shader_vs,e.lit_texture_shader_fs)||this;return t.start(),t.shininessLoc=t.getUniformLocation("material.shininess"),i.gl.uniform1i(t.getUniformLocation("material.diffuse"),o.DIFFUSE_UNIT),i.gl.uniform1i(t.getUniformLocation("material.specular"),o.SPECULAR_UNIT),t.tranformationLoc=t.getUniformLocation("tranformationMat"),t.stop(),t}return t(o,r),o.prototype.loadTranformation=function(t){i.gl.uniformMatrix4fv(this.tranformationLoc,!1,t)},o.prototype.loadMaterial=function(t){i.gl.activeTexture(i.gl.TEXTURE0),t.diffuseMap.bind(),i.gl.activeTexture(i.gl.TEXTURE1),t.specularMap.bind(),i.gl.uniform1f(this.shininessLoc,t.shininess)},o.DIFFUSE_UNIT=0,o.SPECULAR_UNIT=1,o.EMISSION_UNIT=2,o}(o.default);exports.default=n;
},{"./shader":"GxBv","./glsl/shader_source":"ChK5","../ogl_globals":"rqiD"}],"49h0":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var r=function(){function r(r,t){this.litColorShader=r,this.litTextureShader=t}return r.prototype.renderLitTexture=function(r,t){r.mesh.bindMesh(),this.litTextureShader.start(),this.litTextureShader.loadMaterial(r.material);for(var e=0,a=t;e<a.length;e++){var i=a[e];this.litTextureShader.loadTranformation(i.getTransMatrix()),r.mesh.drawMesh()}},r.prototype.renderLitColor=function(r,t){r.mesh.bindMesh(),this.litColorShader.loadMaterial(r.material);for(var e=0,a=t;e<a.length;e++){var i=a[e];this.litColorShader.loadTranformation(i.getTransMatrix()),r.mesh.drawMesh()}},r}();exports.default=r;
},{}],"1GGi":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var t=require("./ogl_globals"),r=require("gl-matrix"),s=e(require("./shader/lit_color_shader")),o=e(require("./renderer/display_manager")),l=e(require("./shader/global_vs_buffer")),i=e(require("./shader/global_fs_buffer")),a=require("./shader/shader_config"),n=e(require("./shader/lit_texture_shader")),h=e(require("./renderer/renderer")),u=function(){function e(){this.ColorModels=new Map,this.TextureModels=new Map,this.ColorModelsMap=new Map,this.TextureModelsMap=new Map,this.testModel=null,this.litColorShader=new s.default,this.litTextureShader=new n.default,this.renderer=new h.default(this.litColorShader,this.litTextureShader),this.globalFSBuffer=new i.default,this.globalVSBuffer=new l.default,this.sceneAmbient=.2;var e=o.default.getInstance().getViewportSize();this.prespectiveProj=r.mat4.create(),r.mat4.perspective(this.prespectiveProj,45,e[0]/e[1],.1,1e3),this.litTextureShader.setUniformBlockBinding(a.ShaderConfig.GlobalVSBuffer,this.globalVSBuffer.getBindingPoint()),this.litTextureShader.setUniformBlockBinding(a.ShaderConfig.GlobalFSBuffer,this.globalFSBuffer.getBindingPoint()),this.testPostion=r.vec3.fromValues(0,-.7,-3),this.testTranform=r.mat4.create(),r.mat4.translate(this.testTranform,this.testTranform,this.testPostion),this.sunPosition=r.vec3.fromValues(0,0,5),this.sunColor=r.vec3.fromValues(1,1,1),this.globalFSBuffer.setSceneAmbient(this.sceneAmbient),this.globalFSBuffer.setSunColor(this.sunColor),this.globalVSBuffer.setCameraPosition(r.vec3.fromValues(0,0,0)),this.globalVSBuffer.setProjectionMatrix(this.prespectiveProj),this.globalVSBuffer.setSunPosition(this.sunPosition),console.log(t.gl.getError())}return e.prototype.prepare=function(){t.gl.enable(t.gl.DEPTH_TEST),t.gl.enable(t.gl.CULL_FACE),t.gl.clearColor(0,0,0,1)},e.prototype.renderFrame=function(e){var r=this;t.gl.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),this.ColorModels.forEach(function(e,t){var s=r.TextureModelsMap.get(t);r.renderer.renderLitColor(e,s),s.splice(0,s.length)}),this.TextureModels.forEach(function(e,t){var s=r.TextureModelsMap.get(t);r.renderer.renderLitTexture(e,s),s.splice(0,s.length)})},e.prototype.addModel=function(e,t){switch(e.material.materialShader){case a.MaterialShader.LIT_MATERIAL_COLOR_SHADER:this.ColorModels.set(t,e),this.ColorModelsMap.set(t,[]);break;case a.MaterialShader.LIT_MATERIAL_TEXTURE_SHADER:this.TextureModels.set(t,e),this.TextureModelsMap.set(t,[])}},e.prototype.removeModel=function(e){var t;this.ColorModels.has(e)?(t=this.ColorModels.get(e),this.ColorModels.delete(e),this.TextureModelsMap.delete(e),t.release()):this.TextureModels.has(e)&&(t=this.TextureModels.get(e),this.ColorModels.delete(e),this.TextureModelsMap.delete(e),t.release())},e.prototype.processEntities=function(e){for(var t=0,r=e;t<r.length;t++){var s=r[t],o=s.modelName;this.ColorModels.has(o)?this.ColorModelsMap.get(o).push(s):this.TextureModels.has(o)&&this.TextureModelsMap.get(o).push(s)}},e}();exports.default=u;
},{"./ogl_globals":"rqiD","gl-matrix":"IF0X","./shader/lit_color_shader":"uEsE","./renderer/display_manager":"CeE2","./shader/global_vs_buffer":"Hpua","./shader/global_fs_buffer":"eV2o","./shader/shader_config":"/ZKO","./shader/lit_texture_shader":"Cl5f","./renderer/renderer":"49h0"}],"QyL4":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e,t=require("../ogl_globals");!function(e){e[e.DIFFUSE_MAP=0]="DIFFUSE_MAP",e[e.SPECULAR_MAP=1]="SPECULAR_MAP",e[e.EMISSION_MAP=2]="EMISSION_MAP",e[e.DEFAULT_MAP=3]="DEFAULT_MAP"}(e=exports.TextureType||(exports.TextureType={}));var E=function(){function E(e,E){this.type=E,this.id=t.gl.createTexture(),t.gl.bindTexture(t.gl.TEXTURE_2D,this.id),t.gl.pixelStorei(t.gl.UNPACK_FLIP_Y_WEBGL,!0),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_MAG_FILTER,t.gl.LINEAR),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_MIN_FILTER,t.gl.LINEAR_MIPMAP_LINEAR),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_S,t.gl.CLAMP_TO_EDGE),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_T,t.gl.CLAMP_TO_EDGE),t.gl.texImage2D(t.gl.TEXTURE_2D,0,t.gl.RGB,t.gl.RGB,t.gl.UNSIGNED_BYTE,e),t.gl.generateMipmap(t.gl.TEXTURE_2D)}return E.prototype.getType=function(){return this.type},E.prototype.bind=function(){t.gl.bindTexture(t.gl.TEXTURE_2D,this.id)},E.prototype.unBind=function(){t.gl.bindTexture(t.gl.TEXTURE_2D,null)},E.prototype.release=function(){this.type!=e.DEFAULT_MAP&&(t.gl.deleteTexture(this.id),this.id=null)},E}();exports.default=E;
},{"../ogl_globals":"rqiD"}],"rUOE":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var e,r=require("../ogl_globals"),t=require("../shader/shader_config");!function(e){e[e.NONE=0]="NONE",e[e.DEFAULT=1]="DEFAULT"}(e=exports.ModelType||(exports.ModelType={}));var f=function(){function f(f,l){void 0===l&&(l=e.NONE),this.index_cnt=0,this.index_cnt=f.indexData.length,this.type=l,this.createBuffer(),r.gl.bindVertexArray(this.vao),r.gl.enableVertexAttribArray(t.ShaderConfig.VERTEX_LOC),r.gl.enableVertexAttribArray(t.ShaderConfig.NORMAL_LOC),r.gl.enableVertexAttribArray(t.ShaderConfig.UV_LOC),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,this.vertexBuffer),r.gl.bufferData(r.gl.ARRAY_BUFFER,f.vertexData,r.gl.STATIC_DRAW),r.gl.vertexAttribPointer(t.ShaderConfig.VERTEX_LOC,3,r.gl.FLOAT,!1,0,0),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,this.normalBuffer),r.gl.bufferData(r.gl.ARRAY_BUFFER,f.normalData,r.gl.STATIC_DRAW),r.gl.vertexAttribPointer(t.ShaderConfig.NORMAL_LOC,3,r.gl.FLOAT,!1,0,0),f.uvData?(r.gl.bindBuffer(r.gl.ARRAY_BUFFER,this.uvBuffer),r.gl.bufferData(r.gl.ARRAY_BUFFER,f.uvData,r.gl.STATIC_DRAW),r.gl.vertexAttribPointer(t.ShaderConfig.UV_LOC,2,r.gl.FLOAT,!1,0,0)):(r.gl.deleteBuffer(this.uvBuffer),this.uvBuffer=null),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,null),r.gl.bindBuffer(r.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),r.gl.bufferData(r.gl.ELEMENT_ARRAY_BUFFER,f.indexData,r.gl.STATIC_DRAW),r.gl.bindVertexArray(null),r.gl.bindBuffer(r.gl.ELEMENT_ARRAY_BUFFER,null)}return f.prototype.createBuffer=function(){this.vao=r.gl.createVertexArray(),this.vertexBuffer=r.gl.createBuffer(),this.normalBuffer=r.gl.createBuffer(),this.indexBuffer=r.gl.createBuffer(),this.uvBuffer=r.gl.createBuffer()},f.prototype.bindMesh=function(){r.gl.bindVertexArray(this.vao)},f.prototype.drawMesh=function(){r.gl.drawElements(r.gl.TRIANGLES,this.index_cnt,r.gl.UNSIGNED_INT,0)},f.prototype.release=function(){(this.type=e.DEFAULT)||(r.gl.deleteBuffer(this.vertexBuffer),r.gl.deleteBuffer(this.normalBuffer),r.gl.deleteBuffer(this.indexBuffer),this.uvBuffer&&r.gl.deleteBuffer(this.uvBuffer),r.gl.deleteVertexArray(this.vao),this.vertexBuffer=null,this.normalBuffer=null,this.indexBuffer=null,this.uvBuffer=null,this.vao=null)},f}();exports.default=f;
},{"../ogl_globals":"rqiD","../shader/shader_config":"/ZKO"}],"N/Ey":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};exports.__esModule=!0;var t=e(require("./model/texture")),r=e(require("./model/mesh")),n=function(){function e(){if(e.instance)throw new Error("Error: Instatiation failed: use RenderDefaults.getInstance")}return e.prototype.loadTexture=function(){var e=this,r=new Image;r.onload=function(){e.checkerTexture=new t.default(r,t.TextureType.DEFAULT_MAP)},r.src="res/defaults/checker.bmp";var n=new Image;n.onload=function(){e.blackMapTexture=new t.default(n,t.TextureType.DEFAULT_MAP)},n.src="res/defaults/bMap.bmp"},e.prototype.loadMesh=function(){var e=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),t=new Uint32Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),n=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0]);this.mesh=new r.default({vertexData:e,normalData:n,indexData:t},r.ModelType.DEFAULT)},e.prototype.loadResource=function(){this.loadTexture(),this.loadMesh()},e.getInstance=function(){return e.instance},e.prototype.getCheckerTexture=function(){return this.checkerTexture},e.prototype.getBlackTexture=function(){return this.blackMapTexture},e.prototype.getMesh=function(){return this.mesh},e.instance=new e,e}();exports.default=n;
},{"./model/texture":"QyL4","./model/mesh":"rUOE"}],"StiR":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var s=require("gl-matrix"),r=require("../shader/shader_config"),a=e(require("../render_defaults")),i=function(){function e(){}return e.colorW=s.vec3.fromValues(1,1,1),e.colorB=s.vec3.fromValues(0,0,0),e.shininess=16,e.intensity=1,e.shader=r.MaterialShader.LIT_MATERIAL_COLOR_SHADER,e}(),t=function(){function e(e){null==e&&(e={}),this.materialShader=e.materialShader||i.shader,this.shininess=e.shininess||i.shininess;var s=a.default.getInstance();switch(+this.materialShader){case r.MaterialShader.LIT_MATERIAL_COLOR_SHADER:this.diffuse=e.diffuse||i.colorW,this.specular=e.specular||i.colorB;break;case r.MaterialShader.LIT_MATERIAL_TEXTURE_SHADER:this.diffuseMap=e.diffuseMap||s.getCheckerTexture(),this.specularMap=e.specularMap||s.getBlackTexture()}}return e.prototype.release=function(){this.diffuseMap&&this.diffuseMap.release(),this.specularMap&&this.specularMap.release(),this.emissionMap&&this.emissionMap.release()},e}();exports.default=t;
},{"gl-matrix":"IF0X","../shader/shader_config":"/ZKO","../render_defaults":"N/Ey"}],"SyXR":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var t=e(require("./material")),r=e(require("../render_defaults")),a=function(){function e(e){this.name=e.name,this.mesh=e.mesh||r.default.getInstance().getMesh(),this.material=e.material||new t.default}return e.prototype.getName=function(){return name},e.prototype.release=function(){this.mesh.release(),this.material.release()},e}();exports.default=a;
},{"./material":"StiR","../render_defaults":"N/Ey"}],"Llud":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var s=function(){function s(){this.hasNormals=!1,this.hasTexCoords=!1,this.parseSuccess=!0,this.meshes=[]}return s.prototype.isSuccess=function(){return this.parseSuccess},s.prototype.getMeshes=function(){return this.meshes},s}();exports.default=s;
},{}],"s1q5":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function s(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var r=t(require("./model_parser")),s=t(require("../render_engine/model/mesh")),o=function(t){function r(e){var r,o,n,a,i=t.call(this)||this;i.nVertices=[],i.nNormals=[],i.nIndices=[],i.nTexCoords=[],i.pNormals=[],i.pTexCoords=[],i.mtlFile="";for(var l=0,p=e.split("\n");l<p.length;l++){var c=p[l];i.parseLine(c)}if(i.nVertices){var h=null;r=new Float32Array(i.nVertices),a=new Uint32Array(i.nIndices),i.parseSuccess=!0,i.pNormals&&(i.hasNormals=!0,o=new Float32Array(i.pNormals)),i.pTexCoords?(i.hasTexCoords=!0,n=new Float32Array(i.pTexCoords),h=new s.default({vertexData:r,normalData:o,indexData:a,uvData:n})):h=new s.default({vertexData:r,normalData:o,indexData:a}),i.meshes.push(h)}return i}return e(r,t),r.prototype.parseLine=function(e){var t=e.split(" ");switch(t[0]){case"v":this.nVertices.push(+t[1],+t[2],+t[3]);break;case"vt":this.nTexCoords.push(+t[1],+t[2]);break;case"vn":this.nNormals.push(+t[1],+t[2],+t[3]);break;case"f":this.processFaces(t[1]),this.processFaces(t[2]),this.processFaces(t[3]);break;case"mtllib":this.mtlFile=t[1]}},r.prototype.orderTextureCoords=function(e,t){this.pTexCoords[e]=this.nTexCoords[t],this.pTexCoords[e+1]=this.nTexCoords[t+1]},r.prototype.orderNormal=function(e,t){this.pNormals[e]=this.nNormals[t],this.pNormals[e+1]=this.nNormals[t+1],this.pNormals[e+2]=this.nNormals[t+2]},r.prototype.processFaces=function(e){var t,r=3*(+(t=-1==e.search("//")?e.split("/"):e.split("//"))[0]-1),s=2*(+t[0]-1);if(3==t.length){var o=2*(+t[1]-1),n=3*(+t[2]-1);this.orderTextureCoords(s,o),this.orderNormal(r,n)}else if(2==t.length){n=3*(+t[1]-1);this.orderNormal(r,n)}this.nIndices.push(s/2)},r.prototype.getmtlFile=function(){return this.mtlFile},r}(r.default);exports.default=o;
},{"./model_parser":"Llud","../render_engine/model/mesh":"rUOE"}],"KRtj":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};exports.__esModule=!0;var t=e(require("../render_engine/model/model")),o=e(require("./obj_parser")),a=function(){function e(e){this.modelCallback=e}return e.prototype.extractNameExt=function(e){var t=["",""],o=e.split("."),a=o[0].split("/");return t[1]=o[o.length-1],t[0]=a[a.length-1],t},e.prototype.loadData=function(e,t,o){var a=new XMLHttpRequest;a.onreadystatechange=function(){a.readyState==a.DONE&&(200==a.status&&a.response?o(a.response):console.log("Failed to load "+a.status+" "+a.statusText))},a.open("GET",e,!0),a.responseType=t,a.send()},e.prototype.parseObjModel=function(e,a){var r=new o.default(e).getMeshes()[0],n=new t.default({mesh:r,name:a});this.modelCallback(n,a)},e.prototype.loadModel=function(e){var t=this,o=this.extractNameExt(e);switch(o[1]){case"obj":this.loadData(e,"text",function(e){return t.parseObjModel(e,o[0])});break;default:console.log("Unsupported model type ",o[1])}return o[0]},e}();exports.default=a;
},{"../render_engine/model/model":"SyXR","./obj_parser":"s1q5"}],"rJHr":[function(require,module,exports) {
"use strict";exports.__esModule=!0;var t=require("gl-matrix"),a=function(){function a(a,e,o,i){void 0===e&&(e=t.vec3.fromValues(0,0,0)),void 0===o&&(o=t.vec3.fromValues(0,0,0)),void 0===i&&(i=t.vec3.fromValues(1,1,1)),this.modelName=a,this.position=e,this.rotation=o,this.scale=i}return a.prototype.getTransMatrix=function(){var a=t.mat4.create();return t.mat4.identity(a),t.mat4.translate(a,a,this.position),t.mat4.rotateY(a,a,this.rotation[1]),t.mat4.rotateX(a,a,this.rotation[0]),t.mat4.rotateZ(a,a,this.rotation[2]),t.mat4.scale(a,a,this.scale),a},a}();exports.default=a;
},{"gl-matrix":"IF0X"}],"jP6t":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r};exports.__esModule=!0;var n=e(require("./render_engine/renderer/display_manager")),t=e(require("./render_engine/render_engine")),i=e(require("./loader/loader")),a=r(require("./render_engine/model/texture")),o=e(require("./render_engine/model/material")),d=require("./render_engine/shader/shader_config"),u=e(require("./render_engine/render_defaults")),l=e(require("./render_engine/Enitity/entity")),s=require("gl-matrix"),f=function(){function e(){}return e.main=function(){var e=this;this.display.createCanvas([window.innerWidth,window.innerHeight]),u.default.getInstance().loadResource(),this.renderEngine=new t.default,this.renderEngine.prepare(),new i.default(function(r,n){var t=new Image;t.onload=function(){var i=new o.default({diffuseMap:new a.default(t,a.TextureType.DIFFUSE_MAP),materialShader:d.MaterialShader.LIT_MATERIAL_TEXTURE_SHADER});r.material=i,e.renderEngine.addModel(r,n),e.loaderComplete=!0},t.src="res/texture.png"}).loadModel("res/goat.obj");var r=new l.default("goat"),n=[];r.position.set([0,-.7,-3]);for(var f=0;f<50;++f)for(var _=0;_<50;++_)n.push(new l.default("goat",s.vec3.fromValues(f+_-40,f-_,-20)));this.renderLoopCall=function(r){e.loaderComplete&&(n.forEach(function(e,n){e.rotation[1]=r/1e3*1.5*.5}),e.renderEngine.processEntities(n))},this.animationLoop(0)},e.animationLoop=function(r){e.renderLoopCall(r),e.renderEngine.renderFrame(r),window.requestAnimationFrame(e.animationLoop)},e.display=n.default.getInstance(),e.loaderComplete=!1,e}();exports.default=f;
},{"./render_engine/renderer/display_manager":"CeE2","./render_engine/render_engine":"1GGi","./loader/loader":"KRtj","./render_engine/model/texture":"QyL4","./render_engine/model/material":"StiR","./render_engine/shader/shader_config":"/ZKO","./render_engine/render_defaults":"N/Ey","./render_engine/Enitity/entity":"rJHr","gl-matrix":"IF0X"}],"Focm":[function(require,module,exports) {
"use strict";var e=r(require("./src/main"));function r(e){return e&&e.__esModule?e:{default:e}}e.default.main();
},{"./src/main":"jP6t"}]},{},["Focm"], null)
//# sourceMappingURL=/PhySim.c70fdf70.js.map